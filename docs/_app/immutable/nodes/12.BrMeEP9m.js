import{s as le,n as Z,r as se,h as O}from"../chunks/scheduler.CY39Eqgn.js";import{S as ie,i as oe,e as D,s as M,t as W,c as j,a as T,n as G,f as E,d as V,b as J,l as h,k as p,g as ne,h as d,r as H,u as U,v as ae,A as z,j as x}from"../chunks/index.CMp_4GaS.js";import{e as $,u as re,d as ue}from"../chunks/each.DKWPS9VT.js";function ee(s,t,e){const i=s.slice();return i[18]=t[e],i[19]=t,i[20]=e,i}function te(s,t){let e,i,f,v=t[19],u=t[20],_,c;const k=()=>t[14](e,v,u),y=()=>t[14](null,v,u);return{key:s,first:null,c(){e=D("div"),this.h()},l(o){e=j(o,"DIV",{id:!0,class:!0,style:!0}),T(e).forEach(V),this.h()},h(){p(e,"id",i="note-"+t[18].id),p(e,"class",f="note fall lane-"+t[18].lane_number+" svelte-1c53oc0"),h(e,"grid-column",t[18].lane_number),h(e,"animation-duration",100/t[6]+"s"),this.first=e},m(o,g){ne(o,e,g),k(),_||(c=U(e,"animationend",t[8]),_=!0)},p(o,g){t=o,g&4&&i!==(i="note-"+t[18].id)&&p(e,"id",i),g&4&&f!==(f="note fall lane-"+t[18].lane_number+" svelte-1c53oc0")&&p(e,"class",f),g&4&&h(e,"grid-column",t[18].lane_number),g&64&&h(e,"animation-duration",100/t[6]+"s"),(v!==t[19]||u!==t[20])&&(y(),v=t[19],u=t[20],k())},d(o){o&&V(e),y(),_=!1,c()}}}function de(s){let t,e,i,f="bpm:",v,u,_,c,k="note speed:",y,o,g,C,B="​ z ​  ​ x ​ ​​, ​  ​ ​.",P,I,R,L,S,b,a,w,r=[],N=new Map,A,Q,q=$(s[2]);const X=l=>l[18].id;for(let l=0;l<q.length;l+=1){let n=ee(s,q,l),m=X(n);N.set(m,r[l]=te(m,n))}return{c(){t=D("main"),e=D("form"),i=D("div"),i.textContent=f,v=M(),u=D("input"),_=M(),c=D("div"),c.textContent=k,y=M(),o=D("input"),g=M(),C=D("div"),C.textContent=B,P=M(),I=D("div"),R=W("Combo: "),L=W(s[3]),S=M(),b=D("div"),a=W(s[4]),w=M();for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){t=j(l,"MAIN",{class:!0});var n=T(t);e=j(n,"FORM",{id:!0,style:!0});var m=T(e);i=j(m,"DIV",{style:!0,"data-svelte-h":!0}),G(i)!=="svelte-pyud8o"&&(i.textContent=f),v=E(m),u=j(m,"INPUT",{type:!0,style:!0}),_=E(m),c=j(m,"DIV",{style:!0,"data-svelte-h":!0}),G(c)!=="svelte-qnls9l"&&(c.textContent=k),y=E(m),o=j(m,"INPUT",{type:!0,style:!0}),m.forEach(V),g=E(n),C=j(n,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),G(C)!=="svelte-9lm2c2"&&(C.textContent=B),P=E(n),I=j(n,"DIV",{id:!0,class:!0,style:!0});var F=T(I);R=J(F,"Combo: "),L=J(F,s[3]),F.forEach(V),S=E(n),b=j(n,"DIV",{id:!0,class:!0,style:!0});var Y=T(b);a=J(Y,s[4]),Y.forEach(V),w=E(n);for(let K=0;K<r.length;K+=1)r[K].l(n);n.forEach(V),this.h()},h(){h(i,"font-weight","bold"),p(u,"type","number"),h(u,"color","black"),h(c,"font-weight","bold"),h(c,"margin-top","10px"),p(o,"type","number"),h(o,"color","black"),p(e,"id","customisation"),h(e,"position","absolute"),h(e,"align-self","center"),p(C,"id","hit-line"),p(C,"class","svelte-1c53oc0"),p(I,"id","combo"),p(I,"class","gameplay-elemements svelte-1c53oc0"),h(I,"margin-bottom","80px"),p(b,"id","judgement"),p(b,"class","gameplay-elemements svelte-1c53oc0"),h(b,"font-family","'Brush Script MT', cursive"),h(b,"font-weight","bold"),p(t,"class","svelte-1c53oc0")},m(l,n){ne(l,t,n),d(t,e),d(e,i),d(e,v),d(e,u),H(u,s[0]),d(e,_),d(e,c),d(e,y),d(e,o),H(o,s[6]),d(t,g),d(t,C),s[12](C),d(t,P),d(t,I),d(I,R),d(I,L),d(t,S),d(t,b),d(b,a),s[13](b),d(t,w);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(t,null);A||(Q=[U(window,"keydown",ae(s[7])),U(u,"input",s[10]),U(o,"input",s[11])],A=!0)},p(l,[n]){n&1&&z(u.value)!==l[0]&&H(u,l[0]),n&64&&z(o.value)!==l[6]&&H(o,l[6]),n&8&&x(L,l[3]),n&16&&x(a,l[4]),n&324&&(q=$(l[2]),r=re(r,n,X,1,l,q,N,t,ue,te,null,ee))},i:Z,o:Z,d(l){l&&V(t),s[12](null),s[13](null);for(let n=0;n<r.length;n+=1)r[n].d();A=!1,se(Q)}}}function fe(s,t,e){let i,f=[],v=0,u="",_,c=150,k=100,y;function o(a){const w=f.filter(r=>r.lane_number==a);if(i&&w.length>0){const r=i.getBoundingClientRect();for(const N of w)if(N.element){const A=N.element.getBoundingClientRect();A.top>r.top-k&&A.top<r.bottom+k&&(e(3,v++,v),N.element.remove(),e(4,u="Hit!"),g())}}}function g(){_&&(_.classList.remove("judge"),_.offsetWidth,_.classList.add("judge"))}function C(a){if(!a.repeat)switch(a.keyCode){case 90:o(1);break;case 88:o(2);break;case 188:o(3);break;case 190:o(4);break;case 32:B();break}}function B(){const a=f.length+1+Date.now();e(2,f=[...f,{id:a,element:null,lane_number:Math.floor(Math.random()*4)+1}])}function P(a){const w=a.target.id.split("-")[1];e(2,f=f.filter(r=>r.id!=w)),e(3,v=0),e(4,u="Miss!")}function I(){c=z(this.value),e(0,c)}function R(){k=z(this.value),e(6,k)}function L(a){O[a?"unshift":"push"](()=>{i=a,e(1,i)})}function S(a){O[a?"unshift":"push"](()=>{_=a,e(5,_)})}function b(a,w,r){O[a?"unshift":"push"](()=>{w[r].element=a,e(2,f)})}return s.$$.update=()=>{s.$$.dirty&513&&(y&&clearInterval(y),e(9,y=setInterval(()=>{B()},6e4/c)))},[c,i,f,v,u,_,k,C,P,y,I,R,L,S,b]}class he extends ie{constructor(t){super(),oe(this,t,fe,de,le,{})}}export{he as component};
